<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reconocimiento de Voz con Animaci√≥n</title>
    <style>
        #corazon {
            font-size: 48px;
            color: red;
            opacity: 0;
            transition: opacity 1s ease-in-out, color 1s ease-in-out;
        }

        #feedback {
            font-size: 18px;
            color: #333;
            margin-top: 20px;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        #microfono {
            font-size: 36px;
            color: #333;
            margin-top: 20px;
            opacity: 0.5;
            transition: color 0.5s ease-in-out;
        }

        #microfono.active {
            color: green;
            opacity: 1;
        }
    </style>
</head>
<body>
    <h1>Reconocimiento de Voz con Animaci√≥n</h1>
    <p>Di "te amo" y luego di "abrazos" para ver las animaciones de coraz√≥n.</p>

    <div id="microfono">üéôÔ∏è</div>
    <div id="corazon">‚ù§Ô∏è</div>
    <div id="feedback"></div>

    <script>
        function startRecognition() {
            const microfonoElement = document.getElementById('microfono');
            microfonoElement.classList.add('active');

            const recognition = new webkitSpeechRecognition() || new SpeechRecognition();
            recognition.lang = 'es-ES'; // Configura el idioma a espa√±ol

            recognition.onstart = function() {
                console.log('¬°Reconocimiento de voz iniciado!');
            };

            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript.toLowerCase();
                console.log('Transcripci√≥n: ', transcript);

                if (transcript.includes('te amo')) {
                    mostrarAnimacionCorazon('red', '¬°Hermoso! Ahora di "abrazos" para otra sorpresa.');
                    // Reiniciar el reconocimiento de voz despu√©s de la primera parte
                    recognition.stop();
                    setTimeout(() => {
                        recognition.start();
                        microfonoElement.classList.add('active');
                    }, 1000);
                } else if (transcript.includes('abrazos')) {
                    mostrarAnimacionCorazon('green', '¬°Incre√≠ble! Has pronunciado "abrazos" correctamente.');
                }
            };

            recognition.onerror = function(event) {
                console.error('Error de reconocimiento: ', event.error);
                microfonoElement.classList.remove('active');
            };

            recognition.onend = function() {
                console.log('Reconocimiento de voz finalizado.');
                microfonoElement.classList.remove('active');
            };

            recognition.start();
        }

        function mostrarAnimacionCorazon(color, mensaje) {
            const corazonElement = document.getElementById('corazon');
            const feedbackElement = document.getElementById('feedback');

            corazonElement.style.color = color;
            corazonElement.style.opacity = 1;
            feedbackElement.textContent = mensaje;
            feedbackElement.style.opacity = 1;
        }

        window.addEventListener('load', () => {
            startRecognition();
        });
    </script>
</body>
</html>
